# Data Aggregator Service Configuration
# Copy this file to .env and configure your API keys and settings

# =============================================================================
# API KEYS (Required)
# =============================================================================

# Etherscan API Key (Required)
# Get from: https://etherscan.io/apis
# Free tier: 5 calls/sec
ETHERSCAN_API_KEY=your_etherscan_api_key_here

# Covalent API Key (Required)
# Get from: https://www.covalenthq.com/platform/
# Free tier: 100k credits/month
COVALENT_API_KEY=your_covalent_api_key_here

# Bitquery API Key (Optional - Free tier available)
# Get from: https://bitquery.io/
# Free tier has limited queries
BITQUERY_API_KEY=your_bitquery_api_key_here

# CryptoQuant API Key (Optional - Limited free tier)
# Get from: https://cryptoquant.com/
# Free tier has very limited access
CRYPTOQUANT_API_KEY=your_cryptoquant_api_key_here

# =============================================================================
# API ENDPOINTS (Optional - defaults provided)
# =============================================================================

# Custom endpoints if using different regions or versions
ETHERSCAN_ENDPOINT=https://api.etherscan.io/api
BITQUERY_ENDPOINT=https://graphql.bitquery.io
COVALENT_ENDPOINT=https://api.covalenthq.com/v1
COINGLASS_ENDPOINT=https://fapi.coinglass.com
BINANCE_ENDPOINT=https://api.binance.com
CRYPTOQUANT_ENDPOINT=https://api.cryptoquant.com

# =============================================================================
# RATE LIMITS (Requests per second)
# =============================================================================

# Adjust based on your API plan
ETHERSCAN_RATE_LIMIT=5      # Free: 5/sec, Pro: 20/sec
BITQUERY_RATE_LIMIT=2       # Conservative for free tier
COVALENT_RATE_LIMIT=10      # Based on monthly credit limit
COINGLASS_RATE_LIMIT=5      # Conservative for free tier
BINANCE_RATE_LIMIT=20       # Public endpoints: 1200/min = 20/sec
CRYPTOQUANT_RATE_LIMIT=1    # Very limited free tier

# =============================================================================
# CACHE SETTINGS (Time in seconds)
# =============================================================================

# Cache TTL (Time To Live) for different data types
CACHE_TTL_ONCHAIN=300      # 5 minutes - On-chain data changes slowly
CACHE_TTL_FUNDING=60       # 1 minute - Funding rates update hourly but we want fresh data
CACHE_TTL_WHALE=30         # 30 seconds - Whale alerts should be near real-time
CACHE_TTL_MARKET=60        # 1 minute - Market data for general use

# Maximum number of items in cache
CACHE_MAX_SIZE=10000

# =============================================================================
# FALLBACK & RELIABILITY SETTINGS
# =============================================================================

# Maximum retry attempts for failed requests
MAX_RETRIES=3

# Delay between retries (milliseconds)
RETRY_DELAY=1000

# Request timeout (milliseconds)
REQUEST_TIMEOUT=10000

# =============================================================================
# FEATURE TOGGLES
# =============================================================================

# Enable/disable individual APIs
ENABLE_ETHERSCAN=true
ENABLE_BITQUERY=true
ENABLE_COVALENT=true
ENABLE_COINGLASS=true
ENABLE_BINANCE=true
ENABLE_CRYPTOQUANT=false    # Disabled by default due to limited free tier

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Enable metrics collection
ENABLE_METRICS=true

# Metrics collection interval (milliseconds)
METRICS_INTERVAL=60000

# Log level: error, warn, info, debug
LOG_LEVEL=info

# =============================================================================
# ENVIRONMENT SPECIFIC SETTINGS
# =============================================================================

# Environment: development, staging, production
NODE_ENV=development

# =============================================================================
# FREE TIER OPTIMIZATION SETTINGS
# =============================================================================

# Recommended settings for maximizing free tier usage:

# 1. Etherscan Free Tier (5 calls/sec)
#    - Use aggressive caching
#    - Focus on high-value addresses
#    - Batch requests when possible

# 2. Bitquery Free Tier
#    - Limit to essential queries
#    - Cache results aggressively
#    - Use time windows to reduce data volume

# 3. Covalent Free Tier (100k credits/month)
#    - Monitor credit usage
#    - Use multi-chain capabilities efficiently
#    - Cache cross-chain data

# 4. Coinglass Free Tier
#    - Focus on major cryptocurrencies
#    - Use longer cache periods
#    - Prioritize funding rate data

# 5. Binance Public API (No auth required)
#    - Highest rate limits available
#    - Use for market data and funding rates
#    - Excellent for real-time data

# 6. CryptoQuant Free Tier (Very Limited)
#    - Use sparingly for premium indicators
#    - Cache results for maximum time
#    - Consider upgrading for production use

# =============================================================================
# PRODUCTION RECOMMENDATIONS
# =============================================================================

# For production use, consider:
# 1. Upgrading to paid API plans for higher rate limits
# 2. Implementing Redis for distributed caching
# 3. Setting up monitoring and alerting
# 4. Using database for persistent storage of enriched data
# 5. Implementing circuit breakers for API failures
# 6. Setting up API key rotation
# 7. Adding request queuing for high-volume scenarios

# Example production settings:
# ETHERSCAN_RATE_LIMIT=20        # Pro plan
# COVALENT_RATE_LIMIT=50         # Higher plan
# CACHE_MAX_SIZE=100000          # Larger cache
# ENABLE_CRYPTOQUANT=true        # With paid plan